---
title: "Service Fabric 클러스터 용량 계획 | Microsoft Docs"
description: "서비스 패브릭 클러스터 용량 계획 고려 사항입니다. 노드 유형, 내구성 및 안정성 계층"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: 4c584f4a-cb1f-400c-b61f-1f797f11c982
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/24/2017
ms.author: chackdan
translationtype: Human Translation
ms.sourcegitcommit: 4f2230ea0cc5b3e258a1a26a39e99433b04ffe18
ms.openlocfilehash: 788021a5b5715524a534ce3e9ff9019310450f4a
ms.lasthandoff: 03/25/2017


---
# <a name="service-fabric-cluster-capacity-planning-considerations"></a>서비스 패브릭 클러스터 용량 계획 고려 사항
프로덕션 배포의 경우 용량 계획은 중요한 단계입니다. 다음은 해당 프로세스의 일부로 고려해야 하는 항목 중 일부입니다.

* 클러스터에서 시작해야 하는 노드 형식의 수입니다.
* 각 노드 유형의 속성(크기, 기본, 인터넷 연결, VM의 수 등)
* 클러스터의 안정성 및 지속성 특성

이러한 각 항목을 간단히 검토해보겠습니다.

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a>클러스터에서 시작해야 하는 노드 형식의 수입니다.
우선 만든 클러스터가 어디에 사용되는지 및 이 클러스터에 배포하려는 응용 프로그램의 종류를 파악해야 합니다. 클러스터의 용도가 명확하지 않는 경우 상황에 맞는 용량 프로세스를 입력하도록 준비하지 앉아야 합니다.

클러스터에서 시작해야 하는 노드 유형의 수를 설정합니다.  각 노드 유형은 가상 컴퓨터 크기 조정 설정에 매핑됩니다. 각 노드 형식은 독립적으로 확장 또는 축소되고, 다른 포트의 집합을 열며 다른 용량 메트릭을 가질 수 있습니다. 따라서 노드 유형의 수를 결정할 때 기본적으로 다음 사항을 고려합니다.

* 응용 프로그램이 여러 서비스를 보유하고 해당 서비스 중 일부를 공용 또는 인터넷에 연결해야 하나요? 일반적인 응용 프로그램은 클라이언트에서 입력을 수신하는 프런트 엔드 게이트웨이 서비스 및 프런트 엔드 서비스와 통신하는 하나 이상의 백 엔드 서비스를 포함합니다. 따라서 이 경우에 두 개 이상의 노드 유형을 보유하게 됩니다.
* 서비스(응용 프로그램을 구성함)에는 더 유용한 RAM  또는 더 높은 CPU 사용률과 같은 서로 다른 인프라가 필요한가요? 예를 들어 배포하려는 응용 프로그램에 프런트 엔드 서비스 및 백 엔드 서비스가 포함되어 있다고 가정합니다. 프런트 엔드 서비스는 인터넷에 열린 포트가 있는 작은 VM(D2와 같은 VM 크기)에서 실행할 수 있습니다.  하지만 백 엔드 서비스는 계산 집약적이며 인터넷에 연결되지 않은 비교적 큰 VM(D4, D6, D15과 같은 VM 크기로)에서 실행됩니다.
  
  이 예제에서는 하나의 노드 유형에 모든 서비스를 배치할 수 있지만 두 노드 유형을 사용하여 클러스터에 배치하는 것이 좋습니다.  따라서 각 노드 유형이 인터넷 연결 또는 VM 크기와 같은 고유 속성을 가질 수 있습니다. VM의 수를 독립적으로 확장할 수도 있습니다.  
* 미래를 예측할 수 없으므로 알고 있는 사실을 바탕으로 진행하고 다음 응용 프로그램으로 시작해야 하는 노드 형식의 수를 결정합니다. 나중에 노드 유형을 추가하거나 제거할 수 있습니다. 서비스 패브릭 클러스터에는 하나 이상의 노드 유형이 있어야 합니다.

## <a name="the-properties-of-each-node-type"></a>각 노드 유형의 속성
**노드 유형** 은 클라우드 서비스의 역할과 똑같이 보일 수 있습니다. 노드 유형에서 VM 크기, VM 수 및 VM 속성을 정의합니다. Service Fabric 클러스터에 정의된 모든 노드 유형은 별도의 VMSS(가상 컴퓨터 크기 집합)으로 설정됩니다. VMSS는 가상 컴퓨터의 컬렉션을 집합으로 배포하고 관리하는 데 사용할 수 있는 Azure 계산 리소스입니다. 고유한 VMSS로 정의되므로 각 노드 유형을 독립적으로 확장 또는 축소할 수 있고, 다른 포트의 집합을 열며, 다른 용량 메트릭을 가질 수 있습니다.

VMSS에 대한 노드 유형의 관계, 인스턴스 중 하나로 RDP를 수행하는 방법, 새 포트 열기 등에 대한 자세한 내용은 [이 문서](service-fabric-cluster-nodetypes.md)를 읽어보세요.

클러스터에는 둘 이상의 노드 유형이 있을 수 있지만 주 노드 유형(포털에서 정의하는 첫 번째)에는 프로덕션 워크로드에 사용되는 클러스터에 대해 다섯 개 이상(또는 테스트 클러스터에 대해 세 개 이상)의 VM이 있어야 합니다. Resource Manager 템플릿을 사용하여 클러스터를 만드는 경우 노드 유형 정의에서 **주** 특성을 찾습니다. 주 노드 유형은 서비스 패브릭 시스템 서비스가 위치한 노드 유형입니다.  

### <a name="primary-node-type"></a>주 노드 유형
여러 노드 유형을 포함한 클러스터의 경우 하나를 주 노드 유형으로 선택해야 합니다. 다음은 주 노드 유형의 특징입니다.

* 주 노드 유형에 대한 **최소 VM 크기**는 선택한 **내구성 계층**에 따라 결정됩니다. 내구성 계층에 대한 기본값은 브론즈입니다. 내구성 계층 정의 및 내구성이 사용할 값에 대한 자세한 내용은 아래로 스크롤합니다.  
* 주 노드 유형에 대한 **최소 VM 수**는 선택한 **안정성 계층**에 따라 결정됩니다. 안정성 계층에 대한 기본값은 실버입니다. 안정성 계층 정의 및 안정성이 사용할 값에 대한 자세한 내용은 아래로 스크롤합니다. 

 

* 서비스 패브릭 시스템 서비스(예: 클러스터 관리자 서비스 또는 이미지 저장소 서비스)는 주 노드 유형에 배치됩니다. 따라서 클러스터의 안정성 및 내구성은 노드 유형에 대해 선택한 안정성 계층 값 및 내구성 계층 값으로 결정됩니다.

![두 가지 노드 유형이 있는 클러스터의 스크린 샷 ][SystemServices]

### <a name="non-primary-node-type"></a>주가 아닌 노드 유형
여러 노드 유형을 포함한 클러스터의 경우 하나의 주 노드 유형이 있고 나머지는 주가 아닌 노드 유형입니다. 다음은 주가 아닌 노드 유형의 특징입니다.

* 이 노드 유형에 대한 최소 VM 크기는 선택한 내구성 계층에 따라 결정됩니다. 내구성 계층에 대한 기본값은 브론즈입니다. 내구성 계층 정의 및 내구성이 사용할 값에 대한 자세한 내용은 아래로 스크롤합니다.  
* 이 노드 유형에 대한 VM의 최소 수는 하나일 수 있습니다. 그러나 이 노드 유형에서 실행하려는 응용 프로그램/서비스의 복제본 수에 따라 이 수를 선택해야 합니다. 클러스터를 배포한 후에 노드 유형에서 VM의 수를 늘릴 수 있습니다.

## <a name="the-durability-characteristics-of-the-cluster"></a>클러스터의 지속성 특성
지속성 계층은 기본 Azure 인프라와 함께 VM에 있는 권한을 이 시스템에 표시하는 데 사용됩니다. 주 노드 유형에서 이 권한을 사용하면 서비스 패브릭이 시스템 서비스 및 상태 저장 서비스에 대한 쿼럼 요구 사항에 영향을 주는 VM 수준 인프라 요청(VM 다시 부팅, VM 이미지로 다시 설치, 또는 VM 마이그레이션 등)을 일시 중지할 수 있습니다. 주가 아닌 노드 유형에서 이 권한을 사용하면 서비스 패브릭이 실행 중인 상태 저장 서비스에 대한 쿼럼 요구 사항에 영향을 주는 VM 수준 인프라 요청(VM 다시 부팅, VM 이미지로 다시 설치, VM 마이그레이션 등)을 일시 중지할 수 있습니다.

이 권한은 다음 값에 표시됩니다.

* 골드 - UD당 2시간 동안 인프라 작업을 일시 중지할 수 있습니다. 골드 지속성은 D15_V2, G5 등과 같이 전체 노드 VM sku에서만 사용되도록 설정할 수 있습니다.
* 실버 - UD당 30분이라는 기간 동안 인프라 작업을 일시 중지할 수 있습니다. 현재 사용하도록 설정되어 있지 않습니다. 사용하도록 설정되면 단일 코어 이상의 모든 표준 VM에서 사용할 수 있습니다.
* 브론즈 - 권한이 없습니다. 이것이 기본값입니다.

## <a name="the-reliability-characteristics-of-the-cluster"></a>클러스터의 안정성 특성
안정성 계층은 주 노드 유형에서 이 클러스터에서 실행하려는 시스템 서비스의 복제본 수를 설정하는 데 사용됩니다. 복제본 수가 많을수록 클러스터에서 시스템 서비스를 신뢰할 수 있습니다.  

안정성 계층은 다음 값을 사용할 수 있습니다.

* 플래티넘 - 9라는 대상 복제본 세트 수를 가진 시스템 서비스를 실행합니다.
* 골드 - 7이라는 대상 복제본 세트 수를 가진 시스템 서비스를 실행합니다.
* 실버 - 5라는 대상 복제본 세트 수를 가진 시스템 서비스를 실행합니다.
* 브론즈 - 3이라는 대상 복제본 세트 수를 가진 시스템 서비스를 실행합니다.

> [!NOTE]
> 선택한 안정성 계층은 주 노드 형식이 보유해야 하는 노드의 최소 수를 결정합니다. 안정성 계층은 클러스터의 최대 크기와 관련이 없습니다. 따라서 브론즈 안정성으로 실행되는 20개의 노드 클러스터를 보유할 수 있습니다.
> 
> 

 클러스터의 안정성을 한 계층에서 다른 계층으로 업데이트하도록 선택할 수 있습니다. 이렇게 하면 클러스터 업그레이드를 트리거하여 시스템 서비스 복제본 세트 수를 변경합니다. 노드를 추가하는 것처럼 클러스터를 다르게 변경하기 전에 진행 중인 업그레이드가 완료될 때까지 기다립니다.  Service Fabric Explorer에서 또는 [Get-ServiceFabricClusterUpgrade](https://msdn.microsoft.com/library/mt126012.aspx)를 실행하여 업그레이드 진행률을 모니터링할 수 있습니다.


## <a name="primary-node-type---capacity-guidance"></a>주 노드 유형 - 용량 지침

다음은 주 노드 유형 용량 계획에 대한 지침입니다.

1. **VM 인스턴스 수:** Azure에서 프로덕션 워크로드를 실행하려면 Silver 이상의 안정성 계층을 지정해야 합니다. 그러면 최소 주 노드 유형 크기가 5로 변환됩니다.
2. **VM SKU:** 주 노드 유형은 시스템 서비스가 실행되는 위치이므로 VM SKU를 선택할 때는 클러스터에 배치하려는 전체 최대 로드를 고려해야 합니다. 이러한 설명을 뒷받침하는 예가 다음에 나와 있습니다. 주 노드 유형을 "폐"라고 생각하면 폐는 뇌에 산소를 공급합니다. 또한 뇌에 충분한 산소가 공급되지 않으면 몸 전체에 문제가 발생합니다. 

클러스터의 용량 요구 사항은 전적으로 클러스터에서 실행하려는 워크로드에 따라 결정됩니다. 특정 워크로드에 대해 정성적 지침을 제공할 수는 없지만 다음의 보편적인 지침을 통해 시작하는 데 필요한 도움을 얻을 수 있을 것입니다.

프로덕션 워크로드 


- 권장 VM SKU는 표준 D3 또는 표준 D3_V2이거나 14GB 이상의 로컬 SSD를 포함하는 동급 수준입니다.
- 지원되는 최소 사용 VM SKU는 표준 D1 또는 표준 D1_V2이거나 14GB 이상의 로컬 SSD를 포함하는 동급 수준입니다. 
- 프로덕션 작업에는 표준 A0과 같은 부분 코어 VM SKU가 지원되지 않습니다.
- 특히 표준 A1 SKU는 성능상의 이유로 프로덕션 워크로드에 지원되지 않습니다.


## <a name="non-primary-node-type---capacity-guidance-for-stateful-workloads"></a>상태 저장 워크로드에 대한 주가 아닌 노드 유형 - 용량 지침

Service Fabric 신뢰할 수 있는 컬렉션 또는 Reliable Actors를 사용하는 워크로드에 대해서는 다음을 읽어보세요. [여기서 프로그래밍 모델](service-fabric-choose-framework.md)에 대해 자세히 읽어보세요.

1. **VM 인스턴스 수:** 상태 저장 방식의 프로덕션 워크로드의 경우, 최소 5개의 대상 복제본을 사용하여 실행하는 것이 좋습니다. 즉, 각 장애 도메인 및 업그레이드 도메인에 1개의 복제본(복제본 집합 중)이 있으면 안정적인 것입니다. 시스템 서비스에 대한 전체 안정성 계층 개념은 실제로 시스템 서비스에 대해 이 설정을 지정하는 방식에 불과합니다.

따라서 프로덕션 워크로드에서 상태 저장 워크로드를 실행하는 경우 권장되는 최소 주가 아닌 노드 유형 크기는 5입니다.

2. **VM SKU:** 응용 프로그램 서비스가 실행되는 노드 유형이므로 VM SKU를 선택할 때는 각 노드에 배치할 최대 로드를 고려해야 합니다. 노드 유형의 용량 요구 사항은 전적으로 클러스터에서 실행하려는 워크로드에 따라 결정됩니다. 특정 워크로드에 대해 정성적 지침을 제공할 수는 없지만 다음의 보편적인 지침을 통해 시작하는 데 필요한 도움을 얻을 수 있을 것입니다.

프로덕션 워크로드 

- 권장 VM SKU는 표준 D3 또는 표준 D3_V2이거나 14GB 이상의 로컬 SSD를 포함하는 동급 수준입니다.
- 지원되는 최소 사용 VM SKU는 표준 D1 또는 표준 D1_V2이거나 14GB 이상의 로컬 SSD를 포함하는 동급 수준입니다. 
- 프로덕션 작업에는 표준 A0과 같은 부분 코어 VM SKU가 지원되지 않습니다.
- 특히 표준 A1 SKU는 성능상의 이유로 프로덕션 워크로드에 지원되지 않습니다.


## <a name="non-primary-node-type---capacity-guidance-for-stateless-workloads"></a>상태 비저장 워크로드에 대한 주가 아닌 노드 유형 - 용량 지침

상태 비저장 워크로드에 대해서는 다음을 읽어보세요.

**VM 인스턴스 수:** 상태 비저장 프로덕션 워크로드의 경우 지원되는 주가 아닌 노드 유형의 최소 크기는 2입니다. 이 옵션을 사용하면 응용 프로그램에 대해 2개의 상태 비저장 인스턴스를 실행할 수 있으며 서비스는 VM 인스턴스가 손실되어도 계속 실행될 수 있습니다. 

> [!NOTE]
> 클러스터가 5.6보다 낮은 Service Fabric 버전에서 실행되는 경우 런타임에 결함이 발생하므로(5.6 버전에서는 수정될 예정임) 주가 아닌 노드 유형을 5보다 작게 축소하면 클러스터 상태가 불안정하게 바뀌며, 이 문제는 해당 노드 이름을 사용하여 [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState)을 호출할 때까지 지속됩니다. 자세한 내용은 [내부 또는 외부에서 Service Fabric 클러스터 수행](service-fabric-cluster-scale-up-down.md)을 읽어보세요.
> 
>

**VM SKU:** 응용 프로그램 서비스가 실행되는 노드 유형이므로 VM SKU를 선택할 때는 각 노드에 배치할 최대 로드를 고려해야 합니다. 노드 유형의 용량 요구 사항은 전적으로 클러스터에서 실행하려는 워크로드에 따라 결정됩니다. 특정 워크로드에 대해 정성적 지침을 제공할 수는 없지만 다음의 보편적인 지침을 통해 시작하는 데 필요한 도움을 얻을 수 있을 것입니다.

프로덕션 워크로드 


- 권장 VM SKU는 표준 D3 또는 표준 D3_V2이거나 동급 수준입니다. 
- 지원되는 최소 사용 VM SKU는 표준 D1 또는 표준 D1_V2이거나 동급 수준입니다. 
- 프로덕션 작업에는 표준 A0과 같은 부분 코어 VM SKU가 지원되지 않습니다.
- 특히 표준 A1 SKU는 성능상의 이유로 프로덕션 워크로드에 지원되지 않습니다.

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->

## <a name="next-steps"></a>다음 단계
용량 계획을 마치고 클러스터를 설정하면 다음을 참고합니다.

* [서비스 패브릭 클러스터 보안](service-fabric-cluster-security.md)
* [서비스 패브릭 상태 모델 소개](service-fabric-health-introduction.md)
* [VMSS에 대한 노드 유형의 관계](service-fabric-cluster-nodetypes.md)

<!--Image references-->
[SystemServices]: ./media/service-fabric-cluster-capacity/SystemServices.png

